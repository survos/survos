{% extends "base.html.twig" %}

{% block body %}


    {% set columns = [
        'ObjectName',
        'Path'
    ] %}
    <twig:simple_datatables
            perPage="20"
            :caller="_self"
            :columns="columns"
            :data="files"
    >
        <twig:block name="ObjectName">
            <a href="{{ path('survos_bunny_zone', {id: zone ? zone.Id : '~', zoneName: zoneName, path: file.ObjectName}) }}">
                {{ file.ObjectName }}
            </a>
        </twig:block>

    </twig:simple_datatables>


    <h1>{{ zoneName }}</h1>
    <h2>{{ path  }}</h2>
    <table class="table">
        <tbody>
        {% for file in files %}
            <tr>
                <td>
                    <a href="{{ path('survos_bunny_zone', {id: zone ? zone.Id : '~', zoneName: zoneName, path: file.ObjectName}) }}">
                        {{ file.ObjectName }}
                    </a>
                </td>
                <td>
                    {{ file.Path }}
                </td>
                <td>
                    {{ file.Length }}
                </td>
                <td>
                    {# dumb! #}
                    {% set filePath = file.Path|replace({zoneName:''}) %}
                    {{ dump(file, path, filePath, zoneName) }}

                    <a href="{{ path('survos_bunny_download', {zoneName: zoneName, path: filePath, fileName: file.ObjectName}) }}">
                        Download
                    </a>
{#                    {{ dump(file) }}#}
                </td>
            </tr>
        {% endfor %}

        </tbody>

    </table>
{% endblock %}
