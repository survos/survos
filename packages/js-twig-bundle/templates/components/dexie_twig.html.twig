{% set _sc = '@survos/js-twig-bundle/dexie' %}

{% set tableUrls = this.tableUrls|length ? this.tableUrls : {} %}

{#  @todo: move to ons-dexie bridge #}
{#templateId: this.templateId,#}
{#templateType: this.type,#}

controller: {{ _sc }}
<div {{ attributes }}
        {{ stimulus_controller(_sc, {
            refreshEvent: this.refreshEvent,
            twigTemplate: this.twigTemplate,
            twigTemplates: this.twigTemplates,
            filter: this.filter|json_encode,
            key: this.key,
            config: this.config,
            dbName: this.dbName,
            globals: this.globals,
            version: this.version,
            store: this.store,
            caller: this.caller,
        },
            controllerOutlets = { 'app': '#app' }
        ) }}>


    {# idea: each twig block passed in could have it's own target? #}
    <h3>The content div for {{ caller }} with {{ this.store }} is below.</h3>
    <div {{ stimulus_target(_sc, 'content') }}>
        {{ _self }}
        The content from the twig+js with dexie data will be rendered here. DexieTwig<i>Component</i>
    </div>


    <!-- component html -->

</div>
