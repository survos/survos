{% set _sc = '@survos/js-twig-bundle/dexie' %}

{% set tableUrls = this.tableUrls|length ? this.tableUrls : {} %}

{#  @todo: move to ons-dexie bridge #}
{#templateId: this.templateId,#}
{#templateType: this.type,#}

<div {{ attributes }}
        {{ stimulus_controller(_sc, {
            refreshEvent: this.refreshEvent,
            twigTemplate: this.twigTemplate,
            twigTemplates: this.twigTemplates,
            filter: this.filter|json_encode,
            key: this.key,
            config: this.config,
            dbName: this.dbName,
            globals: this.globals,
            version: this.version,
            store: this.store,
            caller: this.caller,
            initDb: this.initDb,
        },
            controllerOutlets = { 'app': '#app' }
        ) }}>


    {# idea: each twig block passed in could have it's own target? #}
    {# <h3>The content div for {{ caller }} with {{ this.store.name }} is below.</h3>
    <div id="dexie-content-{{ this.store.name }}" {{ stimulus_target(_sc, 'content') }}>
        The content {{ _self }} // {{ this.store.name }}
        {{ this.store.schema|default('~') }}
    </div> #}

    <!-- component html {{ _self }}-->

</div>
