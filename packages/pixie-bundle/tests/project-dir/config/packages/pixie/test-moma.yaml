version: 1.1
source:
  dir: data/moma-test/ # relative to project_dir
  locale: en
  include: ['*.json']
  ignore: ['*.csv']

files:
  /Artists/: artist
  /Artworks/: artwork

tables:
  - name: artwork
    #        indexes: 'id|int,department,classification,year|int'
    indexes:
      - id|INTEGER
      - department
      - classification
      - art_year|INTEGER
      - date_acquired|DATETIME # hint only, but can get during in the sql https://stackoverflow.com/questions/17227110/how-do-datetime-values-work-in-sqlite
    #            - description|SEARCHTEXT,translatable
    # column header rules.  Use rulesets?
    rules:
      /ObjectID/: id
      /BeginDate/: artistBirthYear
      /EndDate/: artistDeathYear
      /^Date$/: art_year
      #            /^Date_Acquired/: art_year
      /ConstituentID/: artist_id
    # could come from SQL or created during the import
    properties:
      - 'id:int#'
      - c: 'id:int##'
      - c: 'age:int#'
      - name: id
        type: int # or int##? int+
        pk: true
      - name: status
        type: text
      - name: isAlive
        type: bool
        value: row.artistDeathYear == 0
      - name: decade
        type: int
        value: (row.year % 10) * 10

  - name: artist
    indexes:
      - id|INTEGER
      - nationality
      - birth_year|INTEGER
      - gender
    properties: # extracted from json as virtual columns
      - wiki_qid
    #             - '&qid'
    rules:
      /ConstituentID/: id
      /BeginDate/: birthYear
      /EndDate/: deathYear
