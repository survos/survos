{% extends '@SurvosPixie/pixie/layout.html.twig' %}

{% block title %}{{ pixieCode }} Grid{% endblock %}

{% block body %}


    <nav style="--bs-breadcrumb-divider: url(&#34;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='%236c757d'/%3E%3C/svg%3E&#34;);" aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{{ path('survos_index_stats', {indexName: indexName}) }}">Stats</a></li>
            <li class="breadcrumb-item" aria-current="page">
                <a class="text-body text-decoration-none" href="{{ path('pixie_table', {pixieCode: pixieCode, tableName: tableName}) }}">
                    config
                </a>
            </li>
        </ol>
    </nav>

    {#    {% set columns = [ #}
    {#        'table', #}
    {#        'label', #}
    {#        'description', #}
    {#        'key', #}
    {#        'country_code', #}
    {#        'name', #}
    {#        'image_url', #}

    {#    ] %} #}
    {% set globals = {
        locale: app.locale,
        pixieCode: pixieCode
    } %}

    <div class="search_builder">
    <twig:api_grid
            :class="class"
            :apiGetCollectionUrl="apiUrl"
            :caller="_self"
            :filter="filter"
            :columns="columns"
            :globals="globals"
    >
        <twig:block name="thumbnail">
            <div class="size-100">
            <img class="img-thumbnail h-100 object-fit-cover"
                 src="{{ row.is_shown_by|default(row.image_url)|default(row.thumbnail) }}" />
            </div>
        </twig:block>

        <twig:block name="chevron">
            &nbsp;
        </twig:block>
        <twig:block name="tombstone">
            <div class="tombstone custom-heading text-truncate-three-line">
                {# really the translatable fields #}
                <b>{{ row.title|default(row.label) }}</b>
                <div class="text-truncate-three-line">
                    {{ row.description }}
                </div>
            </div>
        </twig:block>

        <twig:block name="pixie_key">

            {% set lrp =  row.rp|merge({_locale: globals.locale|default('en')}) %}
            {% set pixieItemUrl = path('pixie_show_record', lrp) %}
            <a href="{{ pixieItemUrl }}">
                #<code>{{ row.id }}</code>
            </a>
        </twig:block>
        <twig:block name="id">
            <div style="width: 40px">

                {% set lrp =  row.rp|merge({_locale: globals.locale|default('en')}) %}
                {% set pixieItemUrl = path('pixie_show_record', lrp) %}
                <a href="{{ pixieItemUrl }}">
                    {{ row.id }}
                </a>
            </div>

        </twig:block>
    </twig:api_grid>
    </div>


{% endblock %}
