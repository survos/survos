{% extends '@SurvosPixie/pixie/layout.html.twig' %}

{% block title %}Hello !{% endblock %}

{% block body %}

    <details>
        <summary>Row data</summary>
        {{ dump(row, row.data) }}

    </details>

    <h1>{{ pixieCode }}.{{ tableName }} {{ key }}</h1>
    {{ include(["pixie/%s/%s.html.twig"|format(pixieCode, tableName),  "pixie/%s.html.twig"|format(pixieCode)], {
        item: row,
        data: row.data,
        kv: kv|default(null)
    }, ignore_missing=true)  }}

{#    {{ dump(row) }}#}
{#    {{ dump(row.rp) }}#}
{#    {{ dump(row.marking) }}#}

    {% if workflowEnabled %}
        Workflow: {{ workflow }}

        {{ include('@SurvosWorkflow/_entity_transitions.html.twig', {
            transition_path: 'pixie_transition',
            flowName: workflow,
            entity: row
        }) }}

    {% endif %}

{#    {{ row._raw|default(false) ? dump(row._raw|json_decode) }}#}
{#    {{ row.value|default(false) ? dump(row.value|json_decode) }}#}

    {% if row %}
        <h3>Properties</h3>
        <twig:simple_item_grid
                exclude="_raw,_att,_extra,value"
                :data="row.data"
        >

        </twig:simple_item_grid>


        {% if row._att|default(false) %}
            <h3>._att</h3>
            <twig:simple_item_grid
                    :data="row._att|json_decode(true)"
            />
        {% endif %}
        {% if row._raw|default(false) %}
            <h3>._raw</h3>
            <twig:simple_item_grid
                    :data="row._raw|json_decode(true)"
            />
        {% endif %}
        {% if row.value|default(false) %}
            <h3>.value</h3>
            <twig:simple_item_grid
                    :data="row.value|json_decode(true)"
            />
        {% endif %}
    {% endif %}


{#    {{ dump(row.value|json_decode) }}#}
{#    {{ dump(row) }}#}


{#        <twig:simple_datatables#}
{#                :caller="_self"#}
{#                :columns="columns"#}
{#                :data="row"#}
{#        >#}
{#                <twig:block name="key">#}
{#                    <a href="{{ path('pixie_show_record', {#}
{#                        pixieName: pixieName,#}
{#                        tableName: tableName,#}
{#                        key: row[keyName]#}
{#                    }) }}"> {{ row[keyName] }}</a>#}
{#                </twig:block>#}
{#            <twig:block name="value">#}
{#                <a href="">{{ row.value|default('~~') }}</a>#}
{#            </twig:block>#}

{#        </twig:simple_datatables>#}



{% endblock %}
