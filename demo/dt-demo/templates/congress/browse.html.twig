{% extends 'base.html.twig' %}

{% block title %}Official index{% endblock %}

{% block body %}
    <h1>Browse Elected Officials</h1>
    <p>
        This page uses the <code>api_grid</code> component, and the datatable's AJAX call using API Platform.
    </p>

    {#    <twig:hola /> #}
    {% set class = 'App\\Entity\\Official' %}

    {% component api_grid with {
        class: class,
        caller: _self,
        columns: ['id',
            {name: 'actions', condition: is_granted('ROLE_ADMIN')},
            {name: 'firstName', sortable: true},
            {name: 'lastName', sortable: true},
            {name: 'birthday', sortable: true},
        ]
    } %}

        <twig:block name="officialName">
            <a href="{{ path('app_congress_show', {'id': row.id}) }}">
                {{ row.officialName }}
            </a>
        </twig:block>

        {% block firstName %}
        <b>{{ row.firstName }}</b>
        {% endblock %}

        <twig:block name="birthday">
            {{ row.birthday|date('Y-m-d') }}
        </twig:block>

        <twig:block name="actions">
            <span class="fas fa-pencil"></span>
            <a href="{{ path('app_congress_edit', {'id': row.id}) }}">edit</a>
        </twig:block>

    {% endcomponent %}

{% endblock %}
