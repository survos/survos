import{a as d,b as E}from"./tslib-DpYiEcgu.js";import{e as m}from"./echarts-CJ9wtMP5.js";import{R as g,r as v}from"./react-DLE0P_Nq.js";import{c as _,b as C}from"./size-sensor-699oBplG.js";import{i as h}from"./fast-deep-equal-BxCco598.js";function u(s,i){var t={};return i.forEach(function(e){t[e]=s[e]}),t}function l(s){return typeof s=="function"}function w(s){return typeof s=="string"}var O=function(s){d(i,s);function i(t){var e=s.call(this,t)||this;return e.echarts=t.echarts,e.ele=null,e.isInitialResize=!0,e}return i.prototype.componentDidMount=function(){this.renderNewEcharts()},i.prototype.componentDidUpdate=function(t){var e=this.props.shouldSetOption;if(!(l(e)&&!e(t,this.props))){if(!h(t.theme,this.props.theme)||!h(t.opts,this.props.opts)||!h(t.onEvents,this.props.onEvents)){this.dispose(),this.renderNewEcharts();return}var n=["option","notMerge","lazyUpdate","showLoading","loadingOption"];h(u(this.props,n),u(t,n))||this.updateEChartsOption(),(!h(t.style,this.props.style)||!h(t.className,this.props.className))&&this.resize()}},i.prototype.componentWillUnmount=function(){this.dispose()},i.prototype.getEchartsInstance=function(){return this.echarts.getInstanceByDom(this.ele)||this.echarts.init(this.ele,this.props.theme,this.props.opts)},i.prototype.dispose=function(){if(this.ele){try{_(this.ele)}catch(t){console.warn(t)}this.echarts.dispose(this.ele)}},i.prototype.renderNewEcharts=function(){var t=this,e=this.props,n=e.onEvents,o=e.onChartReady,r=this.updateEChartsOption();this.bindEvents(r,n||{}),l(o)&&o(r),this.ele&&C(this.ele,function(){t.resize()})},i.prototype.bindEvents=function(t,e){function n(r,a){w(r)&&l(a)&&t.on(r,function(c){a(c,t)})}for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n(o,e[o])},i.prototype.updateEChartsOption=function(){var t=this.props,e=t.option,n=t.notMerge,o=n===void 0?!1:n,r=t.lazyUpdate,a=r===void 0?!1:r,c=t.showLoading,f=t.loadingOption,y=f===void 0?null:f,p=this.getEchartsInstance();return p.setOption(e,o,a),c?p.showLoading(y):p.hideLoading(),p},i.prototype.resize=function(){var t=this.getEchartsInstance();if(!this.isInitialResize)try{t.resize()}catch(e){console.warn(e)}this.isInitialResize=!1},i.prototype.render=function(){var t=this,e=this.props,n=e.style,o=e.className,r=o===void 0?"":o,a=E({height:300},n);return g.createElement("div",{ref:function(c){t.ele=c},style:a,className:"echarts-for-react "+r})},i}(v.PureComponent),N=function(s){d(i,s);function i(t){var e=s.call(this,t)||this;return e.echarts=m,e}return i}(O);export{N as E};
